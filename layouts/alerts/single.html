{{ define "main" }}
<div class="container premium-page alerts-page">
  <header class="alerts-header">
    <h1>Price Alerts</h1>
    <p class="subtitle">Get notified when Bitcoin hits your target prices</p>
  </header>

  <!-- Current Price Banner -->
  <div class="current-price-banner" role="status" aria-live="polite" aria-label="Live Bitcoin price">
    <div class="price-info">
      <span class="label">Current BTC Price</span>
      <span class="price" id="current-price">$--,---</span>
      <span class="change" id="price-change">--%</span>
    </div>
    <div class="last-update">
      <span id="last-update">--</span>
    </div>
  </div>

  <!-- Create Alert Section -->
  <section class="create-alert-section">
    <div class="alert-card">
      <h2>Create New Alert</h2>

      <div class="alert-form">
        <div class="form-row">
          <div class="form-group">
            <label for="alert-type">Alert Type</label>
            <select id="alert-type">
              <option value="price_above">Price Above</option>
              <option value="price_below">Price Below</option>
              <option value="percent_change">% Change (24h)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="alert-value">Target Value</label>
            <div class="input-wrapper">
              <span class="input-prefix" id="value-prefix">$</span>
              <input type="number" id="alert-value" placeholder="100000">
              <span class="input-suffix" id="value-suffix"></span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="alert-note">Note (optional)</label>
          <input type="text" id="alert-note" placeholder="e.g., Take profit level">
        </div>

        <div class="notification-options">
          <label class="checkbox-label">
            <input type="checkbox" id="notify-browser" checked>
            <span class="checkmark"></span>
            Browser Notification
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="notify-sound" checked>
            <span class="checkmark"></span>
            Sound Alert
          </label>
        </div>

        <button class="btn-create-alert" id="btn-create-alert">
          <span class="btn-icon">+</span>
          Create Alert
        </button>
      </div>
    </div>
  </section>

  <!-- Quick Alerts -->
  <section class="quick-alerts-section">
    <h3>Quick Alerts</h3>
    <p class="section-desc">One-click alerts for common price targets</p>

    <div class="quick-alerts-grid" id="quick-alerts-grid">
      <!-- Generated by JS based on current price -->
    </div>
  </section>

  <!-- Active Alerts -->
  <section class="active-alerts-section">
    <div class="section-header">
      <h3>Active Alerts</h3>
      <span class="alert-count" id="alert-count">0 alerts</span>
    </div>

    <div class="alerts-list" id="alerts-list">
      <div class="no-alerts" id="no-alerts">
        <div class="no-alerts-icon">ðŸ””</div>
        <p>No alerts set</p>
        <span>Create your first alert above</span>
      </div>
    </div>
  </section>

  <!-- Triggered Alerts History -->
  <section class="triggered-alerts-section">
    <div class="section-header">
      <h3>Recently Triggered</h3>
      <button class="btn-clear-history" id="btn-clear-history">Clear</button>
    </div>

    <div class="triggered-list" id="triggered-list">
      <div class="no-triggered" id="no-triggered">
        <p>No triggered alerts yet</p>
      </div>
    </div>
  </section>

  <!-- Telegram & Discord Integration -->
  <section class="integrations-section">
    <h3>Push Notifications</h3>
    <p class="section-desc">Receive alerts via Telegram or Discord</p>

    <div class="integrations-grid">
      <!-- Telegram Integration -->
      <div class="integration-card telegram-card">
        <div class="integration-header">
          <svg class="integration-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/>
          </svg>
          <div class="integration-info">
            <h4>Telegram Alerts</h4>
            <p>Get instant alerts via Telegram bot</p>
          </div>
        </div>

        <div class="telegram-setup">
          <ol class="setup-steps">
            <li>Open Telegram and search for <strong>@BTCSignalAI_bot</strong></li>
            <li>Send <code>/start</code> to subscribe to alerts</li>
            <li>Manage alerts with <code>/alerts</code> command</li>
          </ol>
          <a href="https://t.me/BTCSignalAI_bot" target="_blank" class="btn-telegram">
            <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/>
            </svg>
            Open Telegram Bot
          </a>
          <p class="integration-note">Bot not yet configured - coming soon!</p>
        </div>
      </div>

      <!-- Discord Integration -->
      <div class="integration-card discord-card">
        <div class="integration-header">
          <svg class="integration-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
          </svg>
          <div class="integration-info">
            <h4>Discord Webhook</h4>
            <p>Send alerts to your Discord server</p>
          </div>
        </div>

        <div class="discord-setup">
          <div class="form-group">
            <label for="discord-webhook-url">Webhook URL</label>
            <input type="url" id="discord-webhook-url" placeholder="https://discord.com/api/webhooks/..." class="discord-input">
          </div>

          <div class="discord-alert-types">
            <label class="checkbox-label">
              <input type="checkbox" id="discord-signals" checked>
              <span class="checkmark"></span>
              Trading Signals
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="discord-funding" checked>
              <span class="checkmark"></span>
              Funding Spikes
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="discord-squeeze">
              <span class="checkmark"></span>
              Squeeze Alerts
            </label>
          </div>

          <div class="discord-actions">
            <button class="btn-test-webhook" id="btn-test-webhook">Test Webhook</button>
            <button class="btn-save-webhook" id="btn-save-webhook">Save</button>
          </div>

          <div class="webhook-status" id="webhook-status"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Key Levels Section -->
  <section class="key-levels-section">
    <h3>Key Technical Levels</h3>
    <p class="section-desc">Auto-suggested alerts based on technical analysis</p>

    <div class="key-levels-grid">
      <div class="level-card resistance">
        <div class="level-type">Resistance</div>
        <div class="level-value" id="resistance-1">$--,---</div>
        <div class="level-label">Major Resistance</div>
        <button class="btn-add-level" data-type="resistance-1">+ Add Alert</button>
      </div>
      <div class="level-card resistance">
        <div class="level-type">Resistance</div>
        <div class="level-value" id="resistance-2">$--,---</div>
        <div class="level-label">Minor Resistance</div>
        <button class="btn-add-level" data-type="resistance-2">+ Add Alert</button>
      </div>
      <div class="level-card support">
        <div class="level-type">Support</div>
        <div class="level-value" id="support-1">$--,---</div>
        <div class="level-label">Major Support</div>
        <button class="btn-add-level" data-type="support-1">+ Add Alert</button>
      </div>
      <div class="level-card support">
        <div class="level-type">Support</div>
        <div class="level-value" id="support-2">$--,---</div>
        <div class="level-label">Minor Support</div>
        <button class="btn-add-level" data-type="support-2">+ Add Alert</button>
      </div>
    </div>
  </section>

  <!-- Notification Permission -->
  <div class="notification-prompt" id="notification-prompt" style="display: none;">
    <div class="prompt-content">
      <span class="prompt-icon">ðŸ””</span>
      <div class="prompt-text">
        <strong>Enable Browser Notifications</strong>
        <p>Get alerted even when this tab isn't active</p>
      </div>
      <button class="btn-enable-notif" id="btn-enable-notif">Enable</button>
      <button class="btn-dismiss-notif" id="btn-dismiss-notif">Later</button>
    </div>
  </div>
</div>

{{ end }}
