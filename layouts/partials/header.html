<header class="header d-none d-lg-block" role="banner">
  <div class="header-content">
    <a href="/" class="logo" aria-label="BTC Signal AI - Home">
      <svg class="logo-icon" viewBox="0 0 40 40" fill="none" aria-hidden="true" focusable="false">
        <!-- Bitcoin circle background -->
        <circle cx="20" cy="20" r="18" fill="url(#btcGradient)" stroke="#f7931a" stroke-width="2"/>
        <!-- Bitcoin symbol -->
        <path d="M22.5 10V8h-2v2h-1V8h-2v2.1c-2.3.4-4 2.3-4 4.6 0 1.4.6 2.6 1.6 3.4-1.4.8-2.4 2.4-2.4 4.2 0 2.6 2.1 4.8 4.8 4.8v2h2v-2h1v2h2v-2.1c2.3-.4 4-2.3 4-4.6 0-1.4-.6-2.6-1.6-3.4 1.4-.8 2.4-2.4 2.4-4.2 0-2.6-2.1-4.8-4.8-4.8zm-4.5 4c0-1.1.9-2 2-2h2c1.1 0 2 .9 2 2s-.9 2-2 2h-4v-2zm6 10c0 1.1-.9 2-2 2h-2c-1.1 0-2-.9-2-2v-2h4c1.1 0 2 .9 2 2z" fill="#fff"/>
        <!-- Signal waves (AI/Signal indicator) -->
        <path d="M32 12c1.5 1.5 2.5 3.5 2.5 6s-1 4.5-2.5 6" stroke="#4ade80" stroke-width="2" stroke-linecap="round" fill="none" opacity="0.9"/>
        <path d="M35 9c2 2.5 3.5 5.5 3.5 9s-1.5 6.5-3.5 9" stroke="#4ade80" stroke-width="2" stroke-linecap="round" fill="none" opacity="0.6"/>
        <!-- AI dot -->
        <circle cx="34" cy="18" r="2" fill="#4ade80"/>
        <defs>
          <linearGradient id="btcGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#f7931a"/>
            <stop offset="100%" stop-color="#d97706"/>
          </linearGradient>
        </defs>
      </svg>
      <span>BTC Signal AI</span>
    </a>
    <div class="d-flex gap-2">
      <nav role="navigation" aria-label="Main navigation">
        <ul class="nav-links" id="nav-links" role="menubar">
          <li role="none"><a href="/" role="menuitem">Home</a></li>
          <li role="none"><a href="/posts/" role="menuitem">Analysis</a></li>
          <li role="none"><a href="/how-it-works/" role="menuitem">How It Works</a></li>
          <li role="none"><a href="/about/" role="menuitem">About</a></li>
          <li role="none"><a href="/learn/" role="menuitem">Learn</a></li>
          <li class="nav-dropdown" role="none">
            <button class="dropdown-toggle" aria-expanded="false" aria-haspopup="true" aria-controls="pro-tools-menu" role="menuitem">
              Pro Tools
              <span class="sr-only">, submenu</span>
            </button>
            <ul class="dropdown-menu" id="pro-tools-menu" role="menu" aria-label="Pro Tools submenu">
              <li role="none"><a href="/alpha-radar/" role="menuitem"><span aria-hidden="true">üì°</span> Alpha Radar</a></li>
              <li role="none"><a href="/whales/" role="menuitem"><span aria-hidden="true">üêã</span> Whale Alerts</a></li>
              <li role="none"><a href="/liquidity-hunter/" role="menuitem"><span aria-hidden="true">üéØ</span> Liquidity Hunter</a></li>
              <li role="none"><a href="/trade-coach/" role="menuitem"><span aria-hidden="true">üéì</span> Trade Coach</a></li>
              <li role="none"><a href="/portfolio-simulator/" role="menuitem"><span aria-hidden="true">üìà</span> Simulator</a></li>
              <li role="none"><a href="/dashboard/" role="menuitem"><span aria-hidden="true">üìä</span> Dashboard</a></li>
              <li role="none"><a href="/analyze/" role="menuitem"><span aria-hidden="true">ü§ñ</span> Chart AI</a></li>
              <li role="none"><a href="/pattern-detector/" role="menuitem"><span aria-hidden="true">üîç</span> Pattern Detector</a></li>
              <li role="none"><a href="/liquidation-map/" role="menuitem"><span aria-hidden="true">üî•</span> Liquidation Map</a></li>
              <li role="none"><a href="/backtester-pro/" role="menuitem"><span aria-hidden="true">üß™</span> Backtester PRO</a></li>
              <li role="none"><a href="/alerts/" role="menuitem"><span aria-hidden="true">üîî</span> Price Alerts</a></li>
              <li role="none"><a href="/newsletter/" role="menuitem"><span aria-hidden="true">üìß</span> Newsletter</a></li>
            </ul>
          </li>
          <li role="none"><a href="/pricing/" class="nav-pricing" role="menuitem">Pricing</a></li>
          <li role="none">
            <a href="https://twitter.com/BTCSignal_ai" target="_blank" rel="noopener noreferrer" role="menuitem">
              Twitter<span class="sr-only"> (opens in new tab)</span>
            </a>
          </li>
        </ul>
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark/light theme" aria-pressed="false">
          <span class="icon icon-moon" aria-hidden="true">üåô</span>
          <span class="icon icon-sun" aria-hidden="true">‚òÄÔ∏è</span>
        </button>
      </nav>
      </div>

  </div>
</header>
<script>
  // Show dashboard link if user has unlocked posts
  (function() {
    try {
      var unlocked = localStorage.getItem('unlockedPosts');
      if (unlocked) {
        var posts = JSON.parse(unlocked);
        if (Array.isArray(posts) && posts.length > 0) {
          var dashNav = document.getElementById('dashboard-nav');
          var analyzeNav = document.getElementById('analyze-nav');
          if (dashNav) dashNav.style.display = 'inline';
          if (analyzeNav) analyzeNav.style.display = 'inline';
        }
      }
    } catch (e) {}
  })();

  // Theme toggle with accessibility
  (function() {
    var toggle = document.getElementById('theme-toggle');
    var html = document.documentElement;

    // Check for saved preference or system preference
    var savedTheme = localStorage.getItem('theme');
    var systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

    if (savedTheme) {
      html.setAttribute('data-theme', savedTheme);
      toggle.setAttribute('aria-pressed', savedTheme === 'light' ? 'true' : 'false');
    } else if (!systemPrefersDark) {
      html.setAttribute('data-theme', 'light');
      toggle.setAttribute('aria-pressed', 'true');
    }

    if (toggle) {
      toggle.addEventListener('click', function() {
        var currentTheme = html.getAttribute('data-theme');
        var newTheme = currentTheme === 'light' ? 'dark' : 'light';

        if (newTheme === 'dark') {
          html.removeAttribute('data-theme');
        } else {
          html.setAttribute('data-theme', newTheme);
        }

        toggle.setAttribute('aria-pressed', newTheme === 'light' ? 'true' : 'false');
        localStorage.setItem('theme', newTheme);

        // Announce to screen readers
        var announcement = document.createElement('div');
        announcement.setAttribute('role', 'status');
        announcement.setAttribute('aria-live', 'polite');
        announcement.className = 'sr-only';
        announcement.textContent = 'Theme changed to ' + newTheme + ' mode';
        document.body.appendChild(announcement);
        setTimeout(function() { announcement.remove(); }, 1000);
      });
    }
  })();

  // Accessible dropdown menu with keyboard support
  (function() {
    var dropdown = document.querySelector('.nav-dropdown');
    var toggle = dropdown ? dropdown.querySelector('.dropdown-toggle') : null;
    var menu = dropdown ? dropdown.querySelector('.dropdown-menu') : null;

    if (!toggle || !menu) return;

    var menuItems = menu.querySelectorAll('a[role="menuitem"]');
    var isOpen = false;

    function openMenu() {
      isOpen = true;
      toggle.setAttribute('aria-expanded', 'true');
      dropdown.classList.add('is-open');
    }

    function closeMenu() {
      isOpen = false;
      toggle.setAttribute('aria-expanded', 'false');
      dropdown.classList.remove('is-open');
    }

    // Toggle on click/Enter/Space
    toggle.addEventListener('click', function(e) {
      e.preventDefault();
      if (isOpen) {
        closeMenu();
      } else {
        openMenu();
        menuItems[0].focus();
      }
    });

    toggle.addEventListener('keydown', function(e) {
      if (e.key === 'ArrowDown' || e.key === 'Down') {
        e.preventDefault();
        openMenu();
        menuItems[0].focus();
      } else if (e.key === 'Escape' || e.key === 'Esc') {
        closeMenu();
        toggle.focus();
      }
    });

    // Keyboard navigation within menu
    menuItems.forEach(function(item, index) {
      item.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowDown' || e.key === 'Down') {
          e.preventDefault();
          menuItems[(index + 1) % menuItems.length].focus();
        } else if (e.key === 'ArrowUp' || e.key === 'Up') {
          e.preventDefault();
          menuItems[(index - 1 + menuItems.length) % menuItems.length].focus();
        } else if (e.key === 'Escape' || e.key === 'Esc') {
          closeMenu();
          toggle.focus();
        } else if (e.key === 'Tab') {
          closeMenu();
        }
      });
    });

    // Close on click outside
    document.addEventListener('click', function(e) {
      if (!dropdown.contains(e.target)) {
        closeMenu();
      }
    });

    // Close on focus outside
    document.addEventListener('focusin', function(e) {
      if (!dropdown.contains(e.target)) {
        closeMenu();
      }
    });
  })();

  // Mobile menu toggle
  (function() {
    var mobileToggle = document.getElementById('mobile-menu-toggle');
    var header = document.querySelector('.header');

    if (!mobileToggle) return;

    mobileToggle.addEventListener('click', function() {
      var isOpen = header.classList.toggle('mobile-nav-active');
      mobileToggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
      mobileToggle.setAttribute('aria-label', isOpen ? 'Close menu' : 'Open menu');
    });

    // Close menu when clicking a link
    var navLinks = document.querySelectorAll('.nav-links a');
    navLinks.forEach(function(link) {
      link.addEventListener('click', function() {
        header.classList.remove('mobile-nav-active');
        mobileToggle.setAttribute('aria-expanded', 'false');
        mobileToggle.setAttribute('aria-label', 'Open menu');
      });
    });

    // Close menu on Escape key
    document.addEventListener('keydown', function(e) {
      if ((e.key === 'Escape' || e.key === 'Esc') && header.classList.contains('mobile-nav-active')) {
        header.classList.remove('mobile-nav-active');
        mobileToggle.setAttribute('aria-expanded', 'false');
        mobileToggle.setAttribute('aria-label', 'Open menu');
        mobileToggle.focus();
      }
    });
  })();
</script>
