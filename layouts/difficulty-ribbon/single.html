{{ define "main" }}
<div class="free-tool-page difficulty-ribbon-page">
  <div class="container">
    <!-- Page Header -->
    <div class="tool-header">
      <div class="tool-badge free-badge">Free Tool</div>
      <h1>Difficulty Ribbon</h1>
      <p class="tool-subtitle">Bitcoin mining difficulty and miner capitulation indicator</p>
    </div>

    <!-- Key Metrics -->
    <div class="metrics-row">
      <div class="metric-card">
        <span class="metric-icon">‚õèÔ∏è</span>
        <span class="metric-value" id="current-difficulty">--</span>
        <span class="metric-label">Current Difficulty</span>
      </div>
      <div class="metric-card">
        <span class="metric-icon">üìä</span>
        <span class="metric-value" id="difficulty-change">--</span>
        <span class="metric-label">Last Adjustment</span>
      </div>
      <div class="metric-card">
        <span class="metric-icon">‚è±Ô∏è</span>
        <span class="metric-value" id="next-adjustment">--</span>
        <span class="metric-label">Next Adjustment</span>
      </div>
      <div class="metric-card">
        <span class="metric-icon">üî•</span>
        <span class="metric-value" id="hash-rate">--</span>
        <span class="metric-label">Hash Rate (EH/s)</span>
      </div>
    </div>

    <!-- Signal Card -->
    <div class="card signal-banner" id="signal-banner">
      <div class="signal-content">
        <span class="signal-icon" id="ribbon-signal-icon">üìä</span>
        <div class="signal-text">
          <h3 id="ribbon-signal-title">Loading...</h3>
          <p id="ribbon-signal-desc">Analyzing difficulty ribbon...</p>
        </div>
      </div>
    </div>

    <!-- Difficulty Chart -->
    <div class="card chart-card">
      <div class="chart-header">
        <h2>Difficulty Ribbon</h2>
        <div class="chart-controls">
          <button class="time-btn" data-range="6m">6M</button>
          <button class="time-btn active" data-range="1y">1Y</button>
          <button class="time-btn" data-range="2y">2Y</button>
          <button class="time-btn" data-range="all">All</button>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="difficulty-chart"></canvas>
      </div>
      <p class="chart-note">
        <span class="note-icon">‚ÑπÔ∏è</span>
        The ribbon shows multiple difficulty moving averages. When shorter MAs cross below longer MAs, miners are capitulating.
      </p>
    </div>

    <!-- Hash Rate Chart -->
    <div class="card chart-card">
      <div class="chart-header">
        <h2>Network Hash Rate</h2>
      </div>
      <div class="chart-container" style="height: 250px;">
        <canvas id="hashrate-chart"></canvas>
      </div>
    </div>

    <!-- Historical Signals -->
    <div class="card">
      <h2>Historical Ribbon Signals</h2>
      <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
        Past performance does not guarantee future results. These signals are for educational purposes.
      </p>
      <div class="historical-signals">
        <div class="signal-row bullish">
          <span class="signal-date">Dec 2022</span>
          <span class="signal-type">Buy Signal</span>
          <span class="signal-price">~$16,500</span>
          <span class="signal-result positive">+340% to peak</span>
        </div>
        <div class="signal-row bullish">
          <span class="signal-date">Mar 2020</span>
          <span class="signal-type">Buy Signal</span>
          <span class="signal-price">~$5,000</span>
          <span class="signal-result positive">+1,280% to peak</span>
        </div>
        <div class="signal-row bullish">
          <span class="signal-date">Dec 2018</span>
          <span class="signal-type">Buy Signal</span>
          <span class="signal-price">~$3,200</span>
          <span class="signal-result positive">+2,050% to peak</span>
        </div>
        <div class="signal-row bullish">
          <span class="signal-date">Jan 2015</span>
          <span class="signal-type">Buy Signal</span>
          <span class="signal-price">~$220</span>
          <span class="signal-result positive">+8,800% to peak</span>
        </div>
      </div>
    </div>

    <!-- Education Section -->
    <div class="education-section card">
      <h2>Understanding the Difficulty Ribbon</h2>
      <div class="education-grid">
        <div class="education-item">
          <span class="edu-icon">üìâ</span>
          <h3>What is Miner Capitulation?</h3>
          <p>When mining becomes unprofitable, weaker miners shut down. This reduces hash rate, causing difficulty to drop. The ribbon visualizes this stress.</p>
        </div>
        <div class="education-item">
          <span class="edu-icon">üéØ</span>
          <h3>The Buy Signal</h3>
          <p>When short-term difficulty MAs cross below long-term MAs, miners are struggling. Historically, these periods mark excellent buying opportunities.</p>
        </div>
        <div class="education-item">
          <span class="edu-icon">‚ö°</span>
          <h3>Why It Works</h3>
          <p>Miner selling pressure decreases during capitulation. With less supply hitting the market and difficulty adjusting down, conditions improve for price recovery.</p>
        </div>
        <div class="education-item">
          <span class="edu-icon">‚ö†Ô∏è</span>
          <h3>Limitations</h3>
          <p>The ribbon can stay compressed for months. It's a long-term indicator - not for day trading. Combine with other metrics for best results.</p>
        </div>
      </div>
    </div>

    <!-- Ribbon Components -->
    <div class="card">
      <h2>Ribbon Components</h2>
      <div class="ribbon-legend">
        <div class="ribbon-item">
          <span class="ribbon-color" style="background: #da77f2;"></span>
          <span class="ribbon-label">200D MA (Long-term)</span>
        </div>
        <div class="ribbon-item">
          <span class="ribbon-color" style="background: #9775fa;"></span>
          <span class="ribbon-label">128D MA</span>
        </div>
        <div class="ribbon-item">
          <span class="ribbon-color" style="background: #748ffc;"></span>
          <span class="ribbon-label">90D MA</span>
        </div>
        <div class="ribbon-item">
          <span class="ribbon-color" style="background: #4dabf7;"></span>
          <span class="ribbon-label">60D MA</span>
        </div>
        <div class="ribbon-item">
          <span class="ribbon-color" style="background: #38d9a9;"></span>
          <span class="ribbon-label">40D MA</span>
        </div>
        <div class="ribbon-item">
          <span class="ribbon-color" style="background: #69db7c;"></span>
          <span class="ribbon-label">25D MA</span>
        </div>
        <div class="ribbon-item">
          <span class="ribbon-color" style="background: #a9e34b;"></span>
          <span class="ribbon-label">14D MA</span>
        </div>
        <div class="ribbon-item">
          <span class="ribbon-color" style="background: #ffd43b;"></span>
          <span class="ribbon-label">9D MA (Short-term)</span>
        </div>
      </div>
      <p style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 1rem;">
        <strong>Expansion</strong> = Healthy mining growth. <strong>Compression/Inversion</strong> = Miner stress or capitulation.
      </p>
    </div>

    <!-- CTA Section -->
    <div class="cta-section">
      <h2>Want Real-Time Mining Alerts?</h2>
      <p>Get notified when the difficulty ribbon signals miner capitulation.</p>
      <a href="/pricing/" class="btn btn-primary">Explore Pro Tools</a>
    </div>
  </div>
</div>
{{ end }}
