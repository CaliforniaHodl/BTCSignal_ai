{{ define "main" }}
<div class="free-tool-page difficulty-ribbon-page">
  <div class="container">
    <!-- Header -->
    <header class="tool-header">
      <span class="free-badge">100% Free</span>
      <h1><span class="tool-icon" aria-hidden="true">‚õèÔ∏è</span> {{ .Title }}</h1>
      <p class="tool-subtitle">Track Bitcoin mining difficulty and identify miner capitulation signals</p>
    </header>

    <!-- Key Metrics -->
    <div class="metrics-row">
      <div class="metric-card">
        <span class="metric-icon" aria-hidden="true">‚ö°</span>
        <span class="metric-value" id="current-difficulty">--</span>
        <span class="metric-label">Current Difficulty</span>
      </div>
      <div class="metric-card">
        <span class="metric-icon" aria-hidden="true">üìà</span>
        <span class="metric-value" id="difficulty-change">--</span>
        <span class="metric-label">Last Adjustment</span>
      </div>
      <div class="metric-card">
        <span class="metric-icon" aria-hidden="true">‚è±Ô∏è</span>
        <span class="metric-value" id="next-adjustment">--</span>
        <span class="metric-label">Next Adjustment</span>
      </div>
      <div class="metric-card">
        <span class="metric-icon" aria-hidden="true">üéØ</span>
        <span class="metric-value" id="ribbon-signal">--</span>
        <span class="metric-label">Ribbon Signal</span>
      </div>
    </div>

    <!-- Difficulty Chart -->
    <div class="card chart-card">
      <div class="chart-header">
        <h2>Difficulty Ribbon</h2>
        <div class="chart-controls">
          <button type="button" class="time-btn" data-range="1y">1Y</button>
          <button type="button" class="time-btn active" data-range="2y">2Y</button>
          <button type="button" class="time-btn" data-range="4y">4Y</button>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="ribbon-chart"></canvas>
      </div>
      <div class="chart-legend">
        <div class="legend-item">
          <span class="legend-line" style="background: #f7931a;"></span>
          <span>Difficulty</span>
        </div>
        <div class="legend-item">
          <span class="legend-line" style="background: #3fb950;"></span>
          <span>128-day MA (Buy signal when crossed)</span>
        </div>
        <div class="legend-item">
          <span class="legend-line" style="background: #f85149;"></span>
          <span>200-day MA</span>
        </div>
      </div>
    </div>

    <!-- Signal Explanation -->
    <div class="card signal-card" id="signal-card">
      <div class="signal-header">
        <span class="signal-icon" aria-hidden="true">üéØ</span>
        <h2>Current Signal: <span id="signal-status">Loading...</span></h2>
      </div>
      <p id="signal-explanation">Analyzing difficulty ribbon...</p>
    </div>

    <!-- Historical Signals -->
    <div class="card">
      <h2>Historical Buy Signals</h2>
      <p style="color: var(--text-secondary); margin-bottom: 1rem;">When difficulty crosses below long-term MA (miner capitulation)</p>
      <div class="signal-history">
        <div class="history-item bullish">
          <span class="history-date">March 2020</span>
          <span class="history-event">COVID Crash Capitulation</span>
          <span class="history-result">+550% in 12 months</span>
        </div>
        <div class="history-item bullish">
          <span class="history-date">Dec 2018</span>
          <span class="history-event">Bear Market Bottom</span>
          <span class="history-result">+1,600% to 2021 peak</span>
        </div>
        <div class="history-item bullish">
          <span class="history-date">Jan 2015</span>
          <span class="history-event">Post-2014 Capitulation</span>
          <span class="history-result">+6,000% to 2017 peak</span>
        </div>
      </div>
    </div>

    <!-- Hash Rate Chart -->
    <div class="card chart-card">
      <h2>Network Hash Rate</h2>
      <div class="chart-container" style="height: 250px;">
        <canvas id="hashrate-chart"></canvas>
      </div>
    </div>

    <!-- Education -->
    <div class="card education-section">
      <h2>Understanding the Difficulty Ribbon</h2>
      <div class="education-grid">
        <div class="education-item">
          <span class="edu-icon" aria-hidden="true">‚õèÔ∏è</span>
          <h3>Mining Difficulty</h3>
          <p>Adjusts every ~2 weeks to maintain 10-minute block times. Higher difficulty = more competition.</p>
        </div>
        <div class="education-item">
          <span class="edu-icon" aria-hidden="true">üìâ</span>
          <h3>Miner Capitulation</h3>
          <p>When unprofitable miners shut down, difficulty drops. This often marks market bottoms.</p>
        </div>
        <div class="education-item">
          <span class="edu-icon" aria-hidden="true">üéØ</span>
          <h3>Buy Signals</h3>
          <p>When short-term MA crosses below long-term MA, historically precedes major rallies.</p>
        </div>
        <div class="education-item">
          <span class="edu-icon" aria-hidden="true">üíé</span>
          <h3>Survival of Fittest</h3>
          <p>After capitulation, only efficient miners remain, making the network stronger.</p>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <div class="cta-section">
      <h2>Get More Mining Insights</h2>
      <p>Track hash rate changes, miner flows, and more with Pro tools</p>
      <a href="/pricing/" class="btn btn-primary">Explore Pro Tools</a>
    </div>
  </div>
</div>
{{ end }}
