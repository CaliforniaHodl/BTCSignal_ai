{{ define "main" }}
<div class="free-tool-page dca-calculator-page">
  <div class="container">
    <!-- Header -->
    <header class="tool-header">
      <span class="free-badge">100% Free</span>
      <h1><span class="tool-icon" aria-hidden="true">ðŸ§®</span> {{ .Title }}</h1>
      <p class="tool-subtitle">See how dollar cost averaging into Bitcoin would have performed with real historical data</p>
    </header>

    <!-- Calculator Card -->
    <div class="card calculator-card">
      <h2>Calculate Your DCA Returns</h2>

      <!-- Preset Buttons -->
      <div class="preset-buttons" role="group" aria-label="Quick date presets">
        <button type="button" class="preset-btn" data-preset="1y">Last 1 Year</button>
        <button type="button" class="preset-btn" data-preset="2y">Last 2 Years</button>
        <button type="button" class="preset-btn" data-preset="4y">Last 4 Years</button>
        <button type="button" class="preset-btn" data-preset="halving">Since Last Halving</button>
      </div>

      <!-- Input Form -->
      <form id="dca-form" class="calculator-grid">
        <div class="form-group">
          <label for="start-date">Start Date</label>
          <input type="date" id="start-date" class="form-control" required>
        </div>
        <div class="form-group">
          <label for="end-date">End Date</label>
          <input type="date" id="end-date" class="form-control" required>
        </div>
        <div class="form-group">
          <label for="frequency">Investment Frequency</label>
          <select id="frequency" class="form-control">
            <option value="daily">Daily</option>
            <option value="weekly" selected>Weekly</option>
            <option value="biweekly">Bi-Weekly</option>
            <option value="monthly">Monthly</option>
          </select>
        </div>
        <div class="form-group">
          <label for="amount">Amount per Purchase ($)</label>
          <input type="number" id="amount" class="form-control" min="1" value="100" required>
        </div>
      </form>

      <button type="button" id="calculate-btn" class="btn btn-primary btn-block">
        <span class="btn-text">Calculate DCA Returns</span>
        <span class="btn-loading" style="display: none;">Calculating...</span>
      </button>

      <!-- Results -->
      <div id="dca-results" class="results-section" style="display: none;">
        <div class="results-grid">
          <div class="result-item">
            <span class="result-label">Total Invested</span>
            <span class="result-value" id="total-invested">$0</span>
          </div>
          <div class="result-item">
            <span class="result-label">Current Value</span>
            <span class="result-value highlight" id="current-value">$0</span>
          </div>
          <div class="result-item">
            <span class="result-label">BTC Accumulated</span>
            <span class="result-value btc" id="btc-accumulated">0 BTC</span>
          </div>
          <div class="result-item">
            <span class="result-label">Average Buy Price</span>
            <span class="result-value" id="avg-price">$0</span>
          </div>
          <div class="result-item">
            <span class="result-label">Total Purchases</span>
            <span class="result-value" id="total-purchases">0</span>
          </div>
          <div class="result-item">
            <span class="result-label">ROI</span>
            <span class="result-value" id="roi">0%</span>
          </div>
        </div>

        <!-- Comparison Section -->
        <div class="comparison-section">
          <h3>DCA vs Lump Sum Comparison</h3>
          <div class="comparison-grid">
            <div class="comparison-item">
              <span class="comp-label">Lump Sum Value</span>
              <span class="comp-value" id="lumpsum-value">$0</span>
            </div>
            <div class="comparison-item">
              <span class="comp-label">Lump Sum ROI</span>
              <span class="comp-value" id="lumpsum-roi">0%</span>
            </div>
            <div class="comparison-item">
              <span class="comp-label">DCA Advantage</span>
              <span class="comp-value" id="dca-advantage">0%</span>
            </div>
            <div class="comparison-item">
              <span class="comp-label">Winner</span>
              <span class="comp-value" id="strategy-winner">-</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Chart Section -->
    <div class="card chart-section" id="chart-section" style="display: none;">
      <h2>Portfolio Growth Over Time</h2>
      <div class="chart-container">
        <canvas id="dca-chart"></canvas>
      </div>
      <div class="chart-legend">
        <div class="legend-item">
          <span class="legend-dot btc-price"></span>
          <span>BTC Price</span>
        </div>
        <div class="legend-item">
          <span class="legend-dot portfolio"></span>
          <span>Portfolio Value</span>
        </div>
        <div class="legend-item">
          <span class="legend-dot invested"></span>
          <span>Total Invested</span>
        </div>
      </div>
    </div>

    <!-- Education Section -->
    <div class="card education-section">
      <h2>What is Dollar Cost Averaging?</h2>
      <div class="education-grid">
        <div class="education-item">
          <span class="edu-icon" aria-hidden="true">ðŸ“…</span>
          <h3>Regular Investing</h3>
          <p>DCA means investing a fixed amount at regular intervals, regardless of price. This removes emotional decision-making.</p>
        </div>
        <div class="education-item">
          <span class="edu-icon" aria-hidden="true">ðŸ“‰</span>
          <h3>Volatility Smoothing</h3>
          <p>By buying at different price points, you average out the highs and lows, reducing the impact of volatility.</p>
        </div>
        <div class="education-item">
          <span class="edu-icon" aria-hidden="true">ðŸ§ </span>
          <h3>No Timing Required</h3>
          <p>You don't need to predict market bottoms or tops. DCA works in any market condition over the long term.</p>
        </div>
        <div class="education-item">
          <span class="edu-icon" aria-hidden="true">ðŸ’ª</span>
          <h3>Discipline Builder</h3>
          <p>Automated, consistent investing builds wealth over time and removes the stress of timing decisions.</p>
        </div>
      </div>
    </div>

    <!-- CTA Section -->
    <div class="cta-section">
      <h2>Ready for Advanced Analysis?</h2>
      <p>Get real-time signals, liquidation maps, and AI-powered insights</p>
      <a href="/pricing/" class="btn btn-primary">Explore Pro Tools</a>
    </div>
  </div>
</div>
{{ end }}
