{{ define "main" }}
<div class="container posts-page">
  <header class="page-header">
    <h1>Analysis History</h1>
    <p class="page-description">Bitcoin technical analysis powered by AI</p>
  </header>

  <div class="posts-table-container">
    <table class="posts-table">
      <thead>
        <tr>
          <th class="col-date">Date</th>
          <th class="col-time">Time</th>
          <th class="col-sentiment">Sentiment</th>
          <th class="col-confidence">Confidence</th>
          <th class="col-price">Price</th>
          <th class="col-change">Change</th>
          <th class="col-action"></th>
        </tr>
      </thead>
      <tbody>
        {{ $pages := .Pages.ByDate.Reverse }}
        {{ range $index, $post := $pages }}
        {{ $isLocked := lt $index 10 }}
        <tr class="post-row {{ $post.Params.direction }}{{ if $isLocked }} locked{{ end }}">
          <td class="col-date">{{ $post.Date.Format "Jan 02, 2006" }}</td>
          <td class="col-time">{{ $post.Date.Format "15:04" }} UTC</td>
          <td class="col-sentiment">
            <span class="sentiment-badge {{ $post.Params.direction }}">
              {{ if eq $post.Params.direction "up" }}
                <span class="emoji">üìà</span> BULLISH
              {{ else if eq $post.Params.direction "down" }}
                <span class="emoji">üìâ</span> BEARISH
              {{ else }}
                <span class="emoji">‚è∏Ô∏è</span> NEUTRAL
              {{ end }}
            </span>
          </td>
          <td class="col-confidence">
            <div class="confidence-wrapper">
              <span class="confidence-value">{{ $post.Params.confidence }}%</span>
              <div class="confidence-bar">
                <div class="confidence-fill" style="width: {{ $post.Params.confidence }}%"></div>
              </div>
            </div>
          </td>
          <td class="col-price">${{ printf "%.2f" $post.Params.price }}</td>
          <td class="col-change {{ if $post.Params.priceChange }}{{ if hasPrefix $post.Params.priceChange "+" }}positive{{ else }}negative{{ end }}{{ end }}">
            {{ $post.Params.priceChange | default "--" }}
          </td>
          <td class="col-action">
            {{ if $isLocked }}
            <a href="{{ $post.Permalink }}" class="lock-btn">üîí Unlock</a>
            {{ else }}
            <a href="{{ $post.Permalink }}" class="view-btn">View</a>
            {{ end }}
          </td>
        </tr>
        {{ end }}
      </tbody>
    </table>
  </div>

  {{ if eq (len .Pages) 0 }}
  <div class="empty-state">
    <p>No analysis posts yet. The bot will start posting hourly analysis soon.</p>
  </div>
  {{ end }}
</div>
{{ end }}
