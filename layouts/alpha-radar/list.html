{{ define "main" }}
<div class="container premium-page alpha-radar-page">
  <!-- Premium Gate -->
  <div class="premium-gate" id="premium-gate">
    <div class="gate-content">
      <div class="gate-icon">üì°</div>
      <h1>Alpha Radar</h1>
      <p class="gate-desc">Market intelligence monitoring whale movements, dominance shifts, and liquidity anomalies in real-time.</p>
      <div class="gate-features">
        <div class="feature-item"><span>üìä</span> BTC Dominance Tracking</div>
        <div class="feature-item"><span>üêã</span> Whale Wallet Movements</div>
        <div class="feature-item"><span>üí∞</span> Stablecoin Flow Analysis</div>
        <div class="feature-item"><span>‚ö†Ô∏è</span> Anomaly Detection</div>
      </div>
      <div class="gate-price">
        <span class="price-amount">‚ö° 50 sats</span>
        <span class="price-period">one-time access</span>
      </div>
      <button class="btn-unlock-premium" id="btn-unlock">Unlock Alpha Radar</button>
      <p class="gate-note">Already unlocked? <a href="#" id="check-access">Check access</a></p>
    </div>
  </div>

  <!-- Alpha Radar Content (Hidden until unlocked) -->
  <div class="premium-content" id="premium-content" style="display: none;">
    <header class="radar-header">
      <h1>üì° Alpha Radar</h1>
      <p class="subtitle">Real-time market intelligence & anomaly detection</p>
      <div class="last-updated">
        Last scan: <span id="last-scan">Loading...</span>
        <button class="btn-refresh" id="btn-refresh" aria-label="Refresh data">‚Üª Refresh</button>
      </div>
    </header>

    <!-- Alert Banner -->
    <div class="alert-banner" id="alert-banner" style="display: none;" role="alert" aria-live="assertive">
      <span class="alert-icon" aria-hidden="true">‚ö†Ô∏è</span>
      <span class="alert-text" id="alert-text"></span>
    </div>

    <!-- Market Overview -->
    <section class="radar-section market-overview">
      <h2>Market Overview</h2>
      <div class="overview-grid">
        <div class="overview-card dominance">
          <div class="card-header">
            <span class="card-icon">üìä</span>
            <h3>BTC Dominance {{ partial "tooltip.html" (dict "text" "Bitcoin's percentage of total crypto market cap. Rising dominance often signals capital flowing from altcoins to BTC (risk-off). Falling dominance suggests altcoin season.") }}</h3>
          </div>
          <div class="card-value" id="btc-dom">--</div>
          <div class="card-change" id="btc-dom-change">Loading...</div>
          <div class="card-signal" id="btc-dom-signal"></div>
        </div>

        <div class="overview-card stablecoin">
          <div class="card-header">
            <span class="card-icon">üíµ</span>
            <h3>Stablecoin Supply {{ partial "tooltip.html" (dict "text" "Total stablecoins on exchanges. Increasing supply = dry powder ready to buy. Decreasing supply may indicate capital leaving crypto markets.") }}</h3>
          </div>
          <div class="card-value" id="stable-supply">--</div>
          <div class="card-change" id="stable-change">Loading...</div>
          <div class="card-signal" id="stable-signal"></div>
        </div>

        <div class="overview-card fear-greed">
          <div class="card-header">
            <span class="card-icon">üò±</span>
            <h3>Fear & Greed {{ partial "tooltip.html" (dict "text" "Measures market sentiment from 0 (Extreme Fear) to 100 (Extreme Greed). Contrarian indicator - extreme readings often precede reversals.") }}</h3>
          </div>
          <div class="card-value" id="fear-greed">--</div>
          <div class="card-label" id="fear-greed-label">Loading...</div>
          <div class="fear-greed-bar">
            <div class="fear-greed-fill" id="fear-greed-fill"></div>
          </div>
        </div>

        <div class="overview-card funding">
          <div class="card-header">
            <span class="card-icon">üìà</span>
            <h3>Funding Rate {{ partial "tooltip.html" (dict "text" "Perpetual futures funding rate. Shows whether longs or shorts are paying. Extreme funding often leads to price squeezes in the opposite direction.") }}</h3>
          </div>
          <div class="card-value" id="funding-rate">--</div>
          <div class="card-change" id="funding-bias">Loading...</div>
          <div class="card-signal" id="funding-signal"></div>
        </div>
      </div>
    </section>

    <!-- Whale Activity Stats -->
    <section class="radar-section whale-activity">
      <h2>üêã Whale Activity {{ partial "tooltip.html" (dict "text" "Large holder movements (>100 BTC). Whale activity often precedes significant price moves.") }} <span class="data-source-badge" id="whale-data-source"></span></h2>
      <div class="whale-grid">
        <div class="whale-card">
          <h3>Alerts (24h) {{ partial "tooltip.html" (dict "text" "Number of large transactions detected in the last 24 hours.") }}</h3>
          <div class="whale-metric">
            <span class="metric-value" id="whale-alert-count">--</span>
            <span class="metric-unit">movements</span>
          </div>
          <p class="metric-note" id="alert-count-signal">Loading...</p>
        </div>
        <div class="whale-card">
          <h3>Exchange Inflows {{ partial "tooltip.html" (dict "text" "BTC moved TO exchanges. High inflows often signal selling pressure as coins are positioned to sell.") }}</h3>
          <div class="whale-metric">
            <span class="metric-value" id="exchange-inflow">--</span>
            <span class="metric-unit">BTC</span>
          </div>
          <p class="metric-note" id="inflow-signal">Loading...</p>
        </div>
        <div class="whale-card">
          <h3>Exchange Outflows {{ partial "tooltip.html" (dict "text" "BTC moved FROM exchanges to cold storage. High outflows typically indicate accumulation and bullish sentiment.") }}</h3>
          <div class="whale-metric">
            <span class="metric-value" id="exchange-outflow">--</span>
            <span class="metric-unit">BTC</span>
          </div>
          <p class="metric-note" id="outflow-signal">Loading...</p>
        </div>
        <div class="whale-card">
          <h3>Largest TX {{ partial "tooltip.html" (dict "text" "The single largest BTC transaction in the last 24 hours. Giant transactions can move markets.") }}</h3>
          <div class="whale-metric">
            <span class="metric-value" id="largest-tx">--</span>
            <span class="metric-unit">BTC</span>
          </div>
          <p class="metric-note" id="largest-tx-signal">Loading...</p>
        </div>
      </div>
    </section>

    <!-- Whale Alerts Feed -->
    <section class="radar-section whale-alerts">
      <h2>üö® Whale Alerts</h2>
      <p class="section-desc">Real-time whale movements from <a href="/whales/">our tracker</a></p>
      <div class="whale-alerts-list" id="whale-alerts-list">
        <div class="loading-spinner">Loading whale data...</div>
      </div>
      <div class="section-footer">
        <a href="/whales/" class="view-all-link">View all whale alerts ‚Üí</a>
      </div>
    </section>

    <!-- HTF Liquidity Zones -->
    <section class="radar-section liquidity-zones">
      <h2>üìç HTF Liquidity Build-ups</h2>
      <p class="section-desc">High timeframe zones where liquidity is accumulating</p>
      <div class="zones-container" id="liquidity-zones">
        <div class="loading-spinner">Scanning liquidity...</div>
      </div>
    </section>

    <!-- Anomaly Detection -->
    <section class="radar-section anomalies">
      <h2>‚ö†Ô∏è Detected Anomalies</h2>
      <p class="section-desc">Unusual market behavior detected by our algorithms</p>
      <div class="anomaly-list" id="anomaly-list">
        <div class="loading-spinner">Scanning for anomalies...</div>
      </div>
    </section>

    <!-- AI Summary -->
    <section class="radar-section ai-summary">
      <h2>ü§ñ AI Market Summary</h2>
      <div class="summary-card">
        <div class="summary-content" id="ai-summary">
          <div class="loading-spinner">Generating analysis...</div>
        </div>
        <div class="summary-meta">
          <span class="summary-time" id="summary-time"></span>
        </div>
      </div>
    </section>
  </div>
</div>

{{ end }}
